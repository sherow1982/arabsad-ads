<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø³Ø§Ø¹Ø¯ ØªØ³ÙˆÙŠÙ‚ÙŠ Ø°ÙƒÙŠ - Ù…Ø¤Ø³Ø³Ø© Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„Ø¹Ø±Ø¨</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="enhanced-arabic-fonts.css">
</head>
<body>
    <!-- Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒÙŠ Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡ -->
    <div id="ai-chatbot" class="chatbot-widget" style="display: none;">
        <div class="chatbot-header">
            <div class="bot-avatar">ğŸ¤–</div>
            <div class="bot-info">
                <h4>Ù…Ø³Ø§Ø¹Ø¯ ØªØ³ÙˆÙŠÙ‚ÙŠ Ø°ÙƒÙŠ</h4>
                <span class="status online">Ù…ØªØ§Ø­ Ø§Ù„Ø¢Ù†</span>
            </div>
            <button class="close-chat" aria-label="Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©">Ã—</button>
        </div>
        
        <div class="chatbot-body">
            <div class="chat-messages" id="chatMessages">
                <div class="message bot-message">
                    <div class="message-content">
                        ğŸ‘‹ Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ! Ø£Ù†Ø§ Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ø°ÙƒÙŠ ÙÙŠ Ù…Ø¤Ø³Ø³Ø© Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„Ø¹Ø±Ø¨.<br>
                        Ø£Ø³Ø§Ø¹Ø¯Ùƒ ÙÙŠ Ø§Ø®ØªÙŠØ§Ø± Ø£ÙØ¶Ù„ Ø®Ø¯Ù…Ø© ØªØ³ÙˆÙŠÙ‚ÙŠØ© Ù„Ø¹Ù…Ù„Ùƒ.
                    </div>
                </div>
            </div>
            
            <div class="quick-options">
                <button class="quick-btn" data-action="google-ads">ğŸ¯ Google Ads</button>
                <button class="quick-btn" data-action="social-media">ğŸ“± Social Media</button>
                <button class="quick-btn" data-action="seo">ğŸ” SEO</button>
                <button class="quick-btn" data-action="ecommerce">ğŸ›’ Ù…ØªØ§Ø¬Ø±</button>
            </div>
            
            <div class="chat-input-area">
                <input type="text" id="chatInput" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§..." maxlength="500">
                <button id="sendMessage" aria-label="Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©">â¤</button>
            </div>
        </div>
    </div>
    
    <!-- Ø²Ø± ÙØªØ­ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© -->
    <button id="chatbot-trigger" class="chatbot-fab" aria-label="ÙØªØ­ Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„ØªØ³ÙˆÙŠÙ‚ Ø§Ù„Ø°ÙƒÙŠ">
        ğŸ¤–
        <span class="notification-badge" id="chatNotification">1</span>
    </button>
    
    <!-- Ø¶Ø¨Ø· Ø§Ø­ØªØ±Ø§ÙÙŠ ÙˆÙ†Ø¨Ø±Ø© Ø¨Ø´Ø±ÙŠØ© -->
    <script src="assets/js/chatbot-config.js" defer></script>
    
    <script>
        class ArabSadAIChatbot {
            constructor() {
                this.isOpen = false;
                const cfg = window.ARABSAD_CHATBOT_CONFIG || {};
                this.responses = {
                    'google-ads': {
                        message: 'ğŸ¯ Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Google Ads ØªØ±ÙØ¹ Ù…Ø¨ÙŠØ¹Ø§ØªÙƒ Ø¨Ø³Ø±Ø¹Ø© ÙˆØ¨Ø£Ù…Ø§Ù†. Ù†Ø­Ø¯Ø¯ Ø§Ù„ÙƒÙ„Ù…Ø§ØªØŒ Ù†ØµÙŠØº Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§ØªØŒ ÙˆÙ†Ù‚ÙŠØ³ Ø§Ù„Ø¹Ø§Ø¦Ø¯. Ù‡Ù„ Ù†Ø´Ø§Ø·Ùƒ Ù…Ø­Ù„ÙŠ Ø£Ù… Ø®Ù„ÙŠØ¬ÙŠØŸ',
                        actions: [
                            { text: 'Ø§Ø·Ù„Ø¨ Ø¹Ø±Ø¶ Ø³Ø¹Ø±', url: 'https://wa.me/201110760081?text=Ø¹Ø±Ø¶ Ø³Ø¹Ø± Google Ads&utm_source=chatbot&utm_medium=ai', target: '_blank' },
                            { text: 'ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø®Ø¯Ù…Ø©', url: 'google-ads-service.html' }
                        ]
                    },
                    'social-media': {
                        message: 'ğŸ“± Ù†ÙØ·Ù„Ù‚ Ø­Ù…Ù„Ø§Øª Ù…Ø¯Ø±ÙˆØ³Ø© Ø¹Ù„Ù‰ ÙÙŠØ³Ø¨ÙˆÙƒ ÙˆØ¥Ù†Ø³ØªØ¬Ø±Ø§Ù… ÙˆØªÙŠÙƒ ØªÙˆÙƒ ÙˆØ³Ù†Ø§Ø¨ Ø´Ø§Øª Ù…Ø¹ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª A/B ÙˆØªØ­Ø³ÙŠÙ† Ø£Ø³Ø¨ÙˆØ¹ÙŠ.',
                        actions: [
                            { text: 'Ø§Ø·Ù„Ø¨ Ø®Ø·Ø© Social', url: 'https://wa.me/201110760081?text=Ø®Ø·Ø© Social&utm_source=chatbot&utm_medium=ai', target: '_blank' },
                            { text: 'Ø£Ù…Ø«Ù„Ø© Ø§Ù„Ø­Ù…Ù„Ø§Øª', url: 'social-media-service.html' }
                        ]
                    },
                    'seo': {
                        message: 'ğŸ” SEO ÙŠØ²ÙŠØ¯ Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ© Ø¨Ø´ÙƒÙ„ Ù…Ø³ØªÙ…Ø±. Ù†Ø¨Ø¯Ø£ Ø¨ØªØ¯Ù‚ÙŠÙ‚ ØªÙ‚Ù†ÙŠØŒ ÙƒÙ„Ù…Ø§Øª Ù…Ø±Ø¨Ø­Ø©ØŒ Ø«Ù… Ù…Ø­ØªÙˆÙ‰ ÙˆØ±ÙˆØ§Ø¨Ø· Ø¢Ù…Ù†Ø©.',
                        actions: [
                            { text: 'ØªØ­Ù„ÙŠÙ„ SEO Ù…Ø¬Ø§Ù†ÙŠ', url: 'https://wa.me/201110760081?text=ØªØ­Ù„ÙŠÙ„ SEO Ù…Ø¬Ø§Ù†ÙŠ&utm_source=chatbot&utm_medium=ai', target: '_blank' },
                            { text: 'Ø®Ø¯Ù…Ø© SEO', url: 'seo-service.html' }
                        ]
                    },
                    'ecommerce': {
                        message: 'ğŸ›’ Ù…ØªØ¬Ø± Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø³Ø±ÙŠØ¹ ÙˆØ¢Ù…Ù† Ù…Ø¹ Ø¨ÙˆØ§Ø¨Ø§Øª Ø¯ÙØ¹ Ù…Ø­Ù„ÙŠØ© ÙˆØªÙƒØ§Ù…Ù„ Ø´Ø­Ù†. Ù†ÙØ­Ø³Ù‘Ù† ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ø´Ø±Ø§Ø¡ ÙˆØ§Ù„ØªØ­ÙˆÙŠÙ„.',
                        actions: [
                            { text: 'Ø¹Ø±Ø¶ Ù…ØªØ¬Ø± Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ', url: 'https://wa.me/201110760081?text=Ø¹Ø±Ø¶ Ù…ØªØ¬Ø± Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ&utm_source=chatbot&utm_medium=ai', target: '_blank' },
                            { text: 'Ø§Ù„Ø®Ø¯Ù…Ø©', url: 'ecommerce-service.html' }
                        ]
                    },
                    'default': {
                        message: (cfg.greeting || 'Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ! ÙƒÙŠÙ ÙŠÙ…ÙƒÙ† Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©ØŸ') + '\n' + (cfg.privacyNote || ''),
                        actions: cfg.ctas || []
                    }
                };
                this.smart = cfg.responses || {};
                this.typingRange = cfg.typingDelayMs || [200,500];
                this.init();
            }
            init(){
                this.bind();
                this.autoOpen();
            }
            bind(){
                const trigger = document.getElementById('chatbot-trigger');
                const closeBtn = document.querySelector('.close-chat');
                const sendBtn = document.getElementById('sendMessage');
                const chatInput = document.getElementById('chatInput');
                trigger && trigger.addEventListener('click',()=>this.toggle());
                closeBtn && closeBtn.addEventListener('click',()=>this.close());
                sendBtn && sendBtn.addEventListener('click',()=>this.send());
                chatInput && chatInput.addEventListener('keypress',(e)=>{if(e.key==='Enter') this.send();});
                document.querySelectorAll('.quick-btn').forEach(btn=>btn.addEventListener('click',(e)=>{
                    const action=e.target.dataset.action; this.reply(action);
                }));
            }
            autoOpen(){
                const cfg = (window.ARABSAD_CHATBOT_CONFIG||{}); const seen=localStorage.getItem('chatbot-seen');
                if(!seen){ setTimeout(()=>{this.notify();}, cfg.openOnIdleMs||10000); localStorage.setItem('chatbot-seen','1'); }
            }
            notify(){ const t=document.getElementById('chatbot-trigger'); const n=document.getElementById('chatNotification'); if(t&&n){ t.style.animation='bounce 2s infinite'; n.style.display='block'; setTimeout(()=>{t.style.animation='';},6000);} }
            toggle(){ this.isOpen?this.close():this.open(); const n=document.getElementById('chatNotification'); if(n) n.style.display='none'; }
            open(){ const w=document.getElementById('ai-chatbot'); if(w){ w.style.display='flex'; w.style.animation='slideInUp .3s ease-out'; this.focusInput(); this.systemGreet(); } }
            close(){ const w=document.getElementById('ai-chatbot'); if(w){ w.style.animation='slideOutDown .3s ease-in'; setTimeout(()=>{w.style.display='none';},300); } }
            focusInput(){ setTimeout(()=>{const i=document.getElementById('chatInput'); i&&i.focus();},300); }
            async send(){ const i=document.getElementById('chatInput'); if(!i||!i.value.trim()) return; const msg=i.value.trim(); this.addUser(msg); await this.typeThenReply(msg); i.value=''; }
            addUser(m){ const box=document.getElementById('chatMessages'); const d=document.createElement('div'); d.className='message user-message'; d.innerHTML=`<div class="message-content">${m}</div>`; box.appendChild(d); box.scrollTop=box.scrollHeight; }
            async typeThenReply(m){ const box=document.getElementById('chatMessages'); const typing=document.createElement('div'); typing.className='message bot-message'; typing.innerHTML='<div class="message-content">ÙŠÙƒØªØ¨â€¦</div>'; box.appendChild(typing); box.scrollTop=box.scrollHeight; await new Promise(r=>setTimeout(r, Math.floor(Math.random()*(this.typingRange[1]-this.typingRange[0]+1))+this.typingRange[0] )); typing.remove(); const r=this.generate(m); this.addBot(r.message, r.actions); }
            generate(m){ const s=m.toLowerCase(); const cfg=window.ARABSAD_CHATBOT_CONFIG||{}; if(/(Ø³Ø¹Ø±|ØªÙƒÙ„ÙØ©|Ù…ÙŠØ²Ø§Ù†ÙŠØ©)/.test(s)) return {message: (cfg.responses?.pricing||'Ø§Ù„ØªØ³Ø¹ÙŠØ± ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø£Ù‡Ø¯Ø§ÙÙƒ ÙˆÙ…ÙŠØ²Ø§Ù†ÙŠØªÙƒ ÙˆØ³ÙˆÙ‚Ùƒ. Ø³Ù†Ù‚ØªØ±Ø­ Ø§Ù„Ø£ÙØ¶Ù„ Ù„ØªØ­Ù‚ÙŠÙ‚ Ù†ØªØ§Ø¦Ø¬ Ù…Ù„Ù…ÙˆØ³Ø©.'), actions:(cfg.ctas||[])}; if(/(Ù…ØªÙ‰|ÙˆÙ‚Øª|Ù…Ø¯Ø©)/.test(s)) return {message: (cfg.responses?.timeline||'Ù†Ø·Ù„Ù‚ Google Ads Ø®Ù„Ø§Ù„ 24-48 Ø³Ø§Ø¹Ø© ÙˆSEO ÙŠØ­ØªØ§Ø¬ 2-6 Ø£Ø´Ù‡Ø±.'), actions:(cfg.ctas||[])}; if(/(Ø¶Ù…Ø§Ù†|Ù†ØªØ§Ø¦Ø¬|Ø¹Ø§Ø¦Ø¯)/.test(s)) return {message: (cfg.responses?.guarantee||'Ù†Ù„ØªØ²Ù… Ø¨Ù†ØªØ§Ø¦Ø¬ Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ù‚ÙŠØ§Ø³ Ø­Ø³Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.'), actions:(cfg.ctas||[])}; if(/(Ù…ØªØ¬Ø±|Ù…ØªØ§Ø¬Ø±|Ø§ÙƒÙˆÙ…Ø±Ø³|ecommerce)/.test(s)) return {message: (cfg.responses?.ecommerce||'Ù†Ù†ÙÙ‘Ø° Ù…ØªØ§Ø¬Ø± Ø³Ø±ÙŠØ¹Ø© ÙˆØ¢Ù…Ù†Ø© Ù…Ø¹ Ø¯ÙØ¹ Ù…Ø­Ù„ÙŠ ÙˆØ´Ø­Ù†.'), actions:(cfg.ctas||[])}; return this.responses.default; }
            reply(action){ const r=this.responses[action]||this.responses.default; this.addBot(r.message, r.actions); }
            addBot(message, actions=[]){ const box=document.getElementById('chatMessages'); const d=document.createElement('div'); d.className='message bot-message'; let a=''; if(actions.length){ a='<div class="message-actions">'+actions.map(act=>`<a href="${act.url}" class="action-btn" ${act.target?`target="${act.target}" rel="noopener"`:''}>${act.text}</a>`).join('')+'</div>'; } d.innerHTML=`<div class="message-content">${message}</div>${a}`; box.appendChild(d); box.scrollTop=box.scrollHeight; }
        }
        document.addEventListener('DOMContentLoaded',()=>{ new ArabSadAIChatbot(); });
    </script>

    <!-- ØªØ­Ø³ÙŠÙ† ØªØ¬Ø±Ø¨Ø© Ø§Ù„ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø¨Ø´Ø±ÙŠØ© Ø¯Ø§Ø®Ù„ Ø§Ù„Ø¨ÙˆØª ÙÙ‚Ø· -->
    <link rel="preload" href="chatbot-inject.html" as="fetch" crossorigin>
    <script>
      // Ø­Ù‚Ù† Ø¶Ø¨Ø· Ø¥Ø¶Ø§ÙÙŠ Ù„Ù„Ø¨ÙˆØª Ø¯ÙˆÙ† ØªØºÙŠÙŠØ± Ø¨ØµØ±ÙŠ Ø¹Ø§Ù…
      fetch('chatbot-inject.html').then(r=>r.text()).then(html=>{ const div=document.createElement('div'); div.innerHTML=html; document.body.appendChild(div); }).catch(()=>{});
    </script>

    <style>
      /* Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø¨ÙˆØª (Ø¯Ø§Ø®Ù„ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¨ÙˆØª ÙÙ‚Ø·) */
      .chatbot-widget { position: fixed; bottom: 120px; right: 20px; width: 380px; max-width: calc(100vw - 40px); height: 500px; background: white; border-radius: 20px; box-shadow: 0 15px 35px rgba(0,0,0,0.15); z-index: 9999; display: flex; flex-direction: column; overflow: hidden; font-family: 'Cairo', sans-serif; }
      .chatbot-header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 1rem; display: flex; align-items: center; gap: .75rem; }
      .chatbot-fab { position: fixed; bottom: 20px; left: 20px; width: 60px; height: 60px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 50%; font-size: 1.5rem; cursor: pointer; box-shadow: 0 4px 20px rgba(102,126,234,0.3); transition: .3s; z-index: 9998; display: flex; align-items: center; justify-content: center; }
      .notification-badge { position: absolute; top: -5px; right: -5px; background: #ef4444; color: white; font-size: .7rem; padding: .2rem .4rem; border-radius: 50%; min-width: 18px; text-align: center; display: none; animation: pulse 2s infinite; }
      .message { max-width: 85%; word-wrap: break-word; }
      .message-content { padding: .75rem 1rem; border-radius: 18px; font-size: .9rem; line-height: 1.5; }
      .bot-message .message-content { background: #f3f4f6; color: #374151; }
      .user-message .message-content { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
      .message-actions { margin-top: .5rem; display: flex; flex-direction: column; gap: .5rem; }
      .action-btn { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: .5rem 1rem; border-radius: 20px; text-decoration: none; font-size: .85rem; font-weight: 500; text-align: center; border: 2px solid transparent; transition: .3s; }
      .action-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(102,126,234,.4); }
      @keyframes bounce{0%,20%,50%,80%,100%{transform:translateY(0)}40%{transform:translateY(-10px)}60%{transform:translateY(-5px)}}
      @keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.1)}100%{transform:scale(1)}}
      @media(max-width:768px){ .chatbot-widget{ width: calc(100vw - 20px); right:10px; bottom:90px; height: 70vh;} .chatbot-fab{ bottom:15px; left:15px; width:55px; height:55px; font-size:1.3rem;} }
    </style>
</body>
</html>